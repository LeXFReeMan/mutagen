<!doctype html><html lang=en class=h-100><head><title>SSH | Mutagen</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" href=/img/favicon.png><link rel=apple-touch-icon sizes=114x114 href=/img/apple-touch-114.png><link rel=apple-touch-icon sizes=144x144 href=/img/apple-touch-144.png><script src=/js/bundle.18ed5611c09fa9cba6a2f11efb8ae4e4f57a0e7289515aa8e3ec64449fd0cdd7.js integrity="sha256-GO1WEcCfqcumovEe&#43;4rk5PV6DnKJUVqo4&#43;xkRJ/Qzdc="></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mukta|Roboto:300,400|Roboto+Mono"><link rel=stylesheet href=/css/bundle.952c27c90e48b6b24083f9bf60cbcd560d7e9f210dd98fec01fa37e24e74242d.css integrity="sha256-lSwnyQ5ItrJAg/m/YMvNVg1&#43;nyEN2Y/sAfo34k50JC0="></head><body class="d-flex flex-column h-100"><div class=flex-shrink-0><nav class="navbar navbar-expand-md navbar-light py-0"><div class=container><a class="navbar-brand mutagen-brand" href=/><img class="d-inline-block align-top logo" src=/img/logo.svg alt="Mutagen logo">
Mutagen</a>
<button class="navbar-toggler mr-2" type=button data-toggle=collapse data-target=#navigation-content aria-controls=navigation-content aria-expanded=false aria-label="Toggle navigation" style=border:none>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation/introduction/installation>Install</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation>Documentation</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://spectrum.chat/mutagen target=_blank>Spectrum</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://twitter.com/mutagen_io target=_blank>Twitter</a></li><li class=nav-item><a class="nav-link text-dark" href=https://github.com/mutagen-io/mutagen target=_blank>GitHub</a></li></ul></div></div></nav><nav class="navbar navbar-expand-md navbar-dark bg-dark py-0"><div class=container><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=introduction-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Introduction</a><div class=dropdown-menu aria-labelledby=introduction-dropdown><a class=dropdown-item href=/documentation/introduction>Overview</a>
<a class=dropdown-item href=/documentation/introduction/installation>Installation</a>
<a class=dropdown-item href=/documentation/introduction/getting-started>Getting started</a>
<a class=dropdown-item href=/documentation/introduction/daemon>Daemon</a>
<a class=dropdown-item href=/documentation/introduction/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/introduction/names-labels-identifiers>Names, labels, and identifiers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=transports-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Transports</a><div class=dropdown-menu aria-labelledby=transports-dropdown><a class=dropdown-item href=/documentation/transports>Overview</a>
<a class=dropdown-item href=/documentation/transports/local>Local</a>
<a class=dropdown-item href=/documentation/transports/ssh>SSH</a>
<a class=dropdown-item href=/documentation/transports/docker>Docker<sup>®</sup> containers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=synchronization-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Synchronization</a><div class=dropdown-menu aria-labelledby=synchronization-dropdown><a class=dropdown-item href=/documentation/synchronization>Overview</a>
<a class=dropdown-item href=/documentation/synchronization/ignores>Ignores</a>
<a class=dropdown-item href=/documentation/synchronization/version-control-systems>Version control systems</a>
<a class=dropdown-item href=/documentation/synchronization/permissions>Permissions</a>
<a class=dropdown-item href=/documentation/synchronization/symbolic-links>Symbolic links</a>
<a class=dropdown-item href=/documentation/synchronization/watching>Watching</a>
<a class=dropdown-item href=/documentation/synchronization/probing-and-scanning>Probing and scanning</a>
<a class=dropdown-item href=/documentation/synchronization/staging>Staging</a>
<a class=dropdown-item href=/documentation/synchronization/size-limits>Size limits</a>
<a class=dropdown-item href=/documentation/synchronization/safety-mechanisms>Safety mechanisms</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=forwarding-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Forwarding</a><div class=dropdown-menu aria-labelledby=forwarding-dropdown><a class=dropdown-item href=/documentation/forwarding>Overview</a>
<a class=dropdown-item href=/documentation/forwarding/unix-domain-sockets>Unix domain sockets</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=orchestration-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Orchestration</a><div class=dropdown-menu aria-labelledby=orchestration-dropdown><a class=dropdown-item href=/documentation/orchestration>Overview</a>
<a class=dropdown-item href=/documentation/orchestration/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/orchestration/example>Example</a></div></li></ul></div></div></nav><div class="container my-5"><div class=row><div class="d-none d-lg-block col-lg-3"><div class="sticky-top padded-sticky-top"><nav id=TableOfContents><ul><li><a href=#ssh>SSH</a><ul><li><a href=#requirements>Requirements</a></li><li><a href=#synchronization>Synchronization</a></li><li><a href=#forwarding>Forwarding</a></li><li><a href=#mechanism-of-action>Mechanism of action</a></li><li><a href=#openssh-search-path>OpenSSH search path</a></li><li><a href=#windows>Windows</a><ul><li><a href=#ssh-servers>SSH servers</a></li><li><a href=#putty>PuTTY</a></li></ul></li></ul></li></ul></nav></div></div><div id=content class="col-md-12 col-lg-9 mb-3"><h1 id=ssh>SSH</h1><p>Mutagen provides support for synchronizing files and forwarding network traffic
via SSH. This support extends to SSH clients and servers found on both POSIX and
Windows systems.</p><h2 id=requirements>Requirements</h2><p>Mutagen requires an OpenSSH client installation to be available on your system.
This is the default for almost all POSIX operating systems, so you probably
don&rsquo;t need to do anything if you&rsquo;re on macOS, Linux<sup>®</sup>, or one of the
BSDs. Windows is supported as well, but please see the
<a href=#windows>section on Windows support</a> for more detailed information.</p><p>Mutagen should support most SSH server implementations, so long as they support
OpenSSH&rsquo;s <code>scp</code> and <code>ssh</code> implementations. If you run into trouble with a
particular SSH server implementation, please file an issue.</p><h2 id=synchronization>Synchronization</h2><p>SSH-accessible synchronization endpoints can be specified to the
<code>mutagen sync create</code> command using an SCP-like URL syntax of the form:</p><pre><code>[&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;]:&lt;path&gt;
</code></pre><p>The <code>&lt;user&gt;</code> component is optional and will be passed to OpenSSH to override the
default username.</p><p>The <code>&lt;host&gt;</code> component can be any IP address, hostname, or alias understood by
OpenSSH.</p><p>The <code>&lt;port&gt;</code> component is also optional and is an extension to the standard SCP
URL syntax. If specified, it will be passed to OpenSSH to override the default
port.</p><p>The <code>&lt;path&gt;</code> component is interpreted in the same way as an SCP path. It can be
an absolute path, e.g.</p><pre><code>user@host:/var/www
</code></pre><p>a relative path (which will be resolved relative to the default SSH working
directory (usually the user&rsquo;s home directory)), e.g.</p><pre><code>user@host:path/in/home/directory
</code></pre><p>a home-directory-relative path, e.g.</p><pre><code>user@host:~/path/in/home/directory
</code></pre><p>or an alternate user home-directory-relative path, e.g.</p><pre><code>user@host:~otheruser/path/in/their/home/directory
</code></pre><p>The <code>&lt;path&gt;</code> component is not allowed to be empty.</p><h2 id=forwarding>Forwarding</h2><p>SSH-accessible network endpoints can be specified to the
<code>mutagen forward create</code> command using URLs of the form:</p><pre><code>[&lt;user&gt;@]&lt;host&gt;[:&lt;port&gt;]:&lt;network-endpoint&gt;
</code></pre><p>The <code>&lt;user&gt;</code>, <code>&lt;host&gt;</code>, and <code>&lt;port&gt;</code> components of this URL are the same those
in the synchronization URL format described above, while the
<code>&lt;network-endpoint&gt;</code> component is described in the
<a href=../../forwarding/#endpoint-urls>forwarding documentation</a>. In the case of
relative Unix domain socket paths, path resolution will be performed relative to
the default SSH working directory (usually the user&rsquo;s home directory).</p><h2 id=mechanism-of-action>Mechanism of action</h2><p>Mutagen&rsquo;s SSH support is provided by the OpenSSH installation on your system.
Mutagen uses the OpenSSH suite&rsquo;s <code>scp</code> command to copy agent binaries to remote
systems and the <code>ssh</code> command to run and communicate with the agent binaries
over standard input/output streams.</p><p>Mutagen redirects SSH prompts to its <code>create</code> and <code>resume</code> commands via the
<code>SSH_ASKPASS</code> environment variable.</p><p>This design has a number of advantages:</p><ul><li>OpenSSH installations are nearly universal in the POSIX world, and
<a href=https://blogs.msdn.microsoft.com/powershell/2017/12/15/using-the-openssh-beta-in-windows-10-fall-creators-update-and-windows-server-1709/>OpenSSH is now making its way to Windows</a>.</li><li>Mutagen automatically uses all existing SSH configuration, keys, and aliases.</li><li>There&rsquo;s no risk of baking in an SSH library that might be found to have
security vulnerabilities.</li><li>With OpenSSH being the <em>de facto</em> SSH implementation, other SSH server
implementations are far more likely to aim for compatibility with OpenSSH
clients.</li><li>OpenSSH has a much longer develoment and security track record than any SSH
library implementation.</li></ul><p>Mutagen may eventually support other SSH clients or embed the
<a href=https://godoc.org/golang.org/x/crypto/ssh>Go SSH library</a>, but these will
always be fallback options.</p><h2 id=openssh-search-path>OpenSSH search path</h2><p>On POSIX systems, Mutagen uses the first OpenSSH <code>ssh</code> and <code>scp</code> executables
that are found in the user&rsquo;s path. On Windows systems, Mutagen uses a different
approach described <a href=#windows>below</a>. Both of these search strategies can be
overridden by setting the <code>MUTAGEN_SSH_PATH</code> environment variable (for the
Mutagen daemon) to a path containing the desired OpenSSH executables.</p><h2 id=windows>Windows</h2><p>Windows is fully supported by Mutagen, though you&rsquo;ll need to bring your own
OpenSSH client. Unfortunately the
<a href=https://blogs.msdn.microsoft.com/powershell/2017/12/15/using-the-openssh-beta-in-windows-10-fall-creators-update-and-windows-server-1709/>official Windows OpenSSH client</a>
is still in beta and has a few blocking issues (primarily
<a href=https://github.com/PowerShell/Win32-OpenSSH/issues/1152>1152</a>) that disallow
its use by Mutagen at the moment. As soon as these issues are resolved, this
will become Mutagen&rsquo;s recommended client (though others will continue to be
supported).</p><p>Mutagen has a hardcoded set of OpenSSH clients that it will look for and use at
the moment, including those from
<a href=https://gitforwindows.org/>Git for Windows</a> (recommended),
<a href=http://www.msys2.org/>MSYS2</a>, and <a href=https://www.cygwin.com/>Cygwin</a>. You can
see the full list of search paths
<a href=https://github.com/mutagen-io/mutagen/blob/781ab52616a0aebc90a4394df2eee323f3d97f2b/pkg/tools/ssh/ssh_windows.go#L9>here</a>.</p><p>One thing to be aware of is that the MSYS2 and Cygwin OpenSSH clients will, by
default, look for SSH configuration (<code>~/.ssh</code>) in the &ldquo;virtual&rdquo; home directory
provided by the underlying Cygwin environment. This is totally fine, though
Mutagen will continue to store its data (<code>~/.mutagen</code>) and look for its
configuration (<code>~/.mutagen.yml</code>) in the user&rsquo;s actual home directory (i.e. that
specified by <code>%USERPROFILE%</code>). The Git for Windows OpenSSH implementation will
look for SSH configuration in the actual home directory as well, which is why
Mutagen will give it priority if found.</p><h3 id=ssh-servers>SSH servers</h3><p>Mutagen is currently only known to work reliably with
<a href=https://www.bitvise.com/ssh-server>Bitvise SSH Server</a> on Windows.</p><p>The
<a href=https://blogs.msdn.microsoft.com/powershell/2017/12/15/using-the-openssh-beta-in-windows-10-fall-creators-update-and-windows-server-1709/>official Windows OpenSSH server</a>
is still in beta and has a few performance issues and other kinks that need to
be ironed out before Mutagen can reliably support it. Mutagen will connect to
this server and mostly work, but the performance is not great at the moment due
to the server&rsquo;s stream handling. Issues have also been experienced with stalled
data streams.</p><p>There is no reason that Mutagen won&rsquo;t work with other Windows SSH servers (e.g.
Cygwin&rsquo;s OpenSSH server), so please report your findings if you try them out.</p><h3 id=putty>PuTTY</h3><p>Mutagen does not support <a href=https://www.putty.org/>PuTTY</a>.</p></div></div></div></div><footer class="mt-auto bg-dark py-4"><div class=container><div class=row><div class="col-md-4 my-3"><h6 class="text-white font-weight-bold mb-1">© 2016 – 2019 Mutagen IO, Inc.</h6><span class=text-light>All rights reserved.</span><br><strong><a class=text-success href=mailto:hello@mutagen.io>hello@mutagen.io</a></strong></div><div class=col-md-8><div class=row><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Resources</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/documentation>Documentation</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://groups.google.com/forum/#!forum/mutagen-announce>Announcements</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen/blob/master/SECURITY.md>Security</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Legal</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/licenses>Licenses</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/third-party-trademarks>Third-party trademarks</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Links</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=https://spectrum.chat/mutagen>Spectrum</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://twitter.com/mutagen_io>Twitter</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen>GitHub</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=#>Top of page ▲</a></li></ul></div></div></div></div></div></footer></body></html>