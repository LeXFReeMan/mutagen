<!doctype html><html lang=en class=h-100><head><title>Docker® containers | Mutagen</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" href=/img/favicon.png><link rel=apple-touch-icon sizes=114x114 href=/img/apple-touch-114.png><link rel=apple-touch-icon sizes=144x144 href=/img/apple-touch-144.png><script src=/js/bundle.18ed5611c09fa9cba6a2f11efb8ae4e4f57a0e7289515aa8e3ec64449fd0cdd7.js integrity="sha256-GO1WEcCfqcumovEe&#43;4rk5PV6DnKJUVqo4&#43;xkRJ/Qzdc="></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mukta|Roboto:300,400|Roboto+Mono"><link rel=stylesheet href=/css/bundle.952c27c90e48b6b24083f9bf60cbcd560d7e9f210dd98fec01fa37e24e74242d.css integrity="sha256-lSwnyQ5ItrJAg/m/YMvNVg1&#43;nyEN2Y/sAfo34k50JC0="></head><body class="d-flex flex-column h-100"><div class=flex-shrink-0><nav class="navbar navbar-expand-md navbar-light py-0"><div class=container><a class="navbar-brand mutagen-brand" href=/><img class="d-inline-block align-top logo" src=/img/logo.svg alt="Mutagen logo">
Mutagen</a>
<button class="navbar-toggler mr-2" type=button data-toggle=collapse data-target=#navigation-content aria-controls=navigation-content aria-expanded=false aria-label="Toggle navigation" style=border:none>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation/introduction/installation>Install</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation>Documentation</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://spectrum.chat/mutagen target=_blank>Spectrum</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://twitter.com/mutagen_io target=_blank>Twitter</a></li><li class=nav-item><a class="nav-link text-dark" href=https://github.com/mutagen-io/mutagen target=_blank>GitHub</a></li></ul></div></div></nav><nav class="navbar navbar-expand-md navbar-dark bg-dark py-0"><div class=container><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=introduction-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Introduction</a><div class=dropdown-menu aria-labelledby=introduction-dropdown><a class=dropdown-item href=/documentation/introduction>Overview</a>
<a class=dropdown-item href=/documentation/introduction/installation>Installation</a>
<a class=dropdown-item href=/documentation/introduction/getting-started>Getting started</a>
<a class=dropdown-item href=/documentation/introduction/daemon>Daemon</a>
<a class=dropdown-item href=/documentation/introduction/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/introduction/names-labels-identifiers>Names, labels, and identifiers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=transports-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Transports</a><div class=dropdown-menu aria-labelledby=transports-dropdown><a class=dropdown-item href=/documentation/transports>Overview</a>
<a class=dropdown-item href=/documentation/transports/local>Local</a>
<a class=dropdown-item href=/documentation/transports/ssh>SSH</a>
<a class=dropdown-item href=/documentation/transports/docker>Docker<sup>®</sup> containers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=synchronization-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Synchronization</a><div class=dropdown-menu aria-labelledby=synchronization-dropdown><a class=dropdown-item href=/documentation/synchronization>Overview</a>
<a class=dropdown-item href=/documentation/synchronization/ignores>Ignores</a>
<a class=dropdown-item href=/documentation/synchronization/version-control-systems>Version control systems</a>
<a class=dropdown-item href=/documentation/synchronization/permissions>Permissions</a>
<a class=dropdown-item href=/documentation/synchronization/symbolic-links>Symbolic links</a>
<a class=dropdown-item href=/documentation/synchronization/watching>Watching</a>
<a class=dropdown-item href=/documentation/synchronization/probing-and-scanning>Probing and scanning</a>
<a class=dropdown-item href=/documentation/synchronization/staging>Staging</a>
<a class=dropdown-item href=/documentation/synchronization/size-limits>Size limits</a>
<a class=dropdown-item href=/documentation/synchronization/safety-mechanisms>Safety mechanisms</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=forwarding-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Forwarding</a><div class=dropdown-menu aria-labelledby=forwarding-dropdown><a class=dropdown-item href=/documentation/forwarding>Overview</a>
<a class=dropdown-item href=/documentation/forwarding/unix-domain-sockets>Unix domain sockets</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=orchestration-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Orchestration</a><div class=dropdown-menu aria-labelledby=orchestration-dropdown><a class=dropdown-item href=/documentation/orchestration>Overview</a>
<a class=dropdown-item href=/documentation/orchestration/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/orchestration/example>Example</a></div></li></ul></div></div></nav><div class="container my-5"><div class=row><div class="d-none d-lg-block col-lg-3"><div class="sticky-top padded-sticky-top"><nav id=TableOfContents><ul><li><a href=#support-for-docker-sup-sup-containers>Support for Docker<sup>®</sup> containers</a><ul><li><a href=#requirements>Requirements</a></li><li><a href=#synchronization>Synchronization</a></li><li><a href=#forwarding>Forwarding</a></li><li><a href=#environment-variables>Environment variables</a><ul><li><a href=#windows-containers>Windows containers</a></li></ul></li><li><a href=#mechanism-of-action>Mechanism of action</a></li><li><a href=#docker-search-path>Docker search path</a></li></ul></li></ul></nav></div></div><div id=content class="col-md-12 col-lg-9 mb-3"><h1 id=support-for-docker-sup-sup-containers>Support for Docker<sup>®</sup> containers</h1><p>Mutagen has support for synchronizing files and forwarding network traffic in
and out of Docker<sup>®</sup> containers. This support extends to all Docker
client platforms (Linux<sup>®</sup>, macOS, Windows, etc.), Docker daemon setups
(local, remote, VM, Hyper-V, etc.), and Docker container types (both Linux and
Windows containers are supported).</p><div class="alert alert-warning"><strong>NOTE:</strong> Mutagen assumes that the transport from the
<code>docker</code> command to the Docker daemon is secure, and thus Mutagen
provides no encryption on top of this transport. For information about
securing the Docker daemon, please see the
<a href=https://docs.docker.com/engine/security/https/>relevant documentation</a>.</div><h2 id=requirements>Requirements</h2><p>Mutagen requires the <code>docker</code> command to be in the user&rsquo;s path. Due to its use
of the <code>-w/--workdir</code> flag with the <code>docker exec</code> command, Mutagen requires a
Docker client and daemon supporting API 1.35+. You can check the API version
support of your Docker client and daemon by using the <code>docker version</code> command.</p><h2 id=synchronization>Synchronization</h2><p>Docker container filesystem endpoints can be specified to the
<code>mutagen sync create</code> command using URLs of the form:</p><pre><code>docker://[&lt;user&gt;@]&lt;container&gt;/path
</code></pre><p>These URLs support Unicode names and paths and neither require nor support URL
escape encoding (i.e. just type &ldquo;ö&rdquo;, not &ldquo;%C3%B6&rdquo;, etc.).</p><p>The <code>&lt;user&gt;</code> component is optional and tells Mutagen to act as the specified
user inside the container. If unspecified, Mutagen uses the default container
user (usually <code>root</code> for Linux containers or <code>ContainerAdministrator</code> for
Windows containers).</p><p>The <code>container</code> component can specify any type of container identifier
understood by <code>docker cp</code> and <code>docker exec</code>, e.g. a name or hexidecimal
identifier.</p><p>The <code>&lt;path&gt;</code> component must be non-empty (i.e. at least a <code>/</code> character) and can
take one of four forms: an absolute path, a home-directory-relative path, a
home-directory-relative path for an alternate user, or a Windows absolute path:</p><pre><code># Example absolute path (/var/www)
docker://container/var/www

# Example home-directory-relative path (~/project)
docker://container/~/project

# Example alternate user home-directory-relative path (~otheruser/project)
docker://container/~otheruser/project

# Example Windows absolute path (C:\path)
docker://container/C:\path
</code></pre><p>Docker containers must be running to create synchronization sessions and to
allow synchronization to run.</p><h2 id=forwarding>Forwarding</h2><p>Docker container network endpoints can be specified to the
<code>mutagen forward create</code> command using URLs of the form:</p><pre><code>docker://[&lt;user&gt;@]&lt;container&gt;:&lt;network-endpoint&gt;
</code></pre><p>The <code>&lt;user&gt;</code> and <code>&lt;container&gt;</code> components of this URL are the same those in the
synchronization URL format described above, while the <code>&lt;network-endpoint&gt;</code>
component is described in the
<a href=../../forwarding/#endpoint-urls>forwarding documentation</a>. In the case of
relative Unix domain socket paths, path resolution will be performed relative to
the default working directory for the container.</p><h2 id=environment-variables>Environment variables</h2><p>The Docker client&rsquo;s behavior is controlled by three environment variables:</p><ul><li><code>DOCKER_HOST</code></li><li><code>DOCKER_TLS_VERIFY</code></li><li><code>DOCKER_CERT_PATH</code></li></ul><p>Mutagen is aware of these environment variables and will lock them in at session
creation time (as seen by the <code>mutagen sync create</code> and <code>mutagen forward create</code>
commands), including locking in absent or empty values. These locked in values
will then be forwarded to any <code>docker</code> commands executed by Mutagen.</p><p>If required, endpoint-specific versions of these variables (prefixed with
<code>MUTAGEN_ALPHA_</code>/<code>MUTAGEN_BETA_</code> for synchronization sessions and
<code>MUTAGEN_SOURCE_</code>/<code>MUTAGEN_DESTINATION_</code> for forwarding sessions) can be used to
override their values on a per-endpoint basis. This would be necessary to (e.g.)
create a synchronization session between two Docker containers hosted on
different Docker daemons. In that case, single global values for <code>DOCKER_*</code>
environment variables can&rsquo;t be used (since it would apply to both endpoint
URLs), and endpoint-specific variables such as <code>MUTAGEN_ALPHA_DOCKER_HOST</code> or
<code>MUTAGEN_BETA_DOCKER_TLS_VERIFY</code> would need to be used when invoking
<code>mutagen sync create</code>.</p><h3 id=windows-containers>Windows containers</h3><p>Docker Windows containers are run using Microsoft&rsquo;s Hyper-V hypervisor, which
unfortunately does not allow <code>docker cp</code> operations to copy files into running
containers. This means that Mutagen has to stop and restart Windows containers
in order to copy its agent executables. Mutagen will prompt the user if this is
necessary and allow the user to abort or proceed. If the user decides to
proceed, the stop and restart will be automatically performed by Mutagen. This
is only necessary if a compatible agent binary doesn&rsquo;t already exist in the
container, so it won&rsquo;t be necessary on subsequent connection operations.</p><p>This restriction does not apply to Linux containers.</p><h2 id=mechanism-of-action>Mechanism of action</h2><p>Mutagen&rsquo;s support for Docker containers is provided by the Docker client
executable on your system. Mutagen uses the <code>docker cp</code> command to copy agent
binaries into containers and the <code>docker exec</code> command to run and communicate
with the agent binaries over standard input/output streams.</p><h2 id=docker-search-path>Docker search path</h2><p>Mutagen uses the first <code>docker</code> executable found in the user&rsquo;s path (and on
macOS includes a few other well-known search paths). This search strategy can be
overridden by setting the <code>MUTAGEN_DOCKER_PATH</code> environment variable (for the
Mutagen daemon) to a path containing the desired Docker client executable.</p></div></div></div></div><footer class="mt-auto bg-dark py-4"><div class=container><div class=row><div class="col-md-4 my-3"><h6 class="text-white font-weight-bold mb-1">© 2016 – 2019 Mutagen IO, Inc.</h6><span class=text-light>All rights reserved.</span><br><strong><a class=text-success href=mailto:hello@mutagen.io>hello@mutagen.io</a></strong></div><div class=col-md-8><div class=row><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Resources</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/documentation>Documentation</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://groups.google.com/forum/#!forum/mutagen-announce>Announcements</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen/blob/master/SECURITY.md>Security</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Legal</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/licenses>Licenses</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/third-party-trademarks>Third-party trademarks</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Links</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=https://spectrum.chat/mutagen>Spectrum</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://twitter.com/mutagen_io>Twitter</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen>GitHub</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=#>Top of page ▲</a></li></ul></div></div></div></div></div></footer></body></html>